# Rackup file auto-generated by kennedy-gen at <%= Time.now %>
here = File.dirname(__FILE__)
bundler_env = File.join(here, 'vendor/gems/environment.rb')
config_dir = File.join(here, 'config')

if File.exist?(bundler_env)
  load bundler_env
else
  require 'rubygems'
end

RACK_ENV = ENV["RACK_ENV"] ||= "development" unless defined?(RACK_ENV)

require 'kennedy/server'
require 'kennedy/instance_configuration'

config = Kennedy::InstanceConfiguration.load_config(config_dir)
Kennedy::ServerInstance = Kennedy::Server.create(:encryption => {:iv => config.encryption['iv'], :passphrase => config.encryption['passphrase']},
                                                 :backend    => config.backend, :session_secret => config.session_secret,
                                                 :api_keys   => config.api_keys, :require_ssl => !(ENV['RACK_ENV'] == 'development'))
                                                 
run Kennedy::ServerInstance
